"use strict";angular.module("angularStates",["ngCookies"]),angular.module("angularStates").factory("StatesService",["$window","$rootElement",function(a,b){function c(a,b,c,d){"object"==typeof a?angular.copy(b,a):f.mapping[c].instance[d]=b}function d(a,b){Object.keys(b).forEach(function(c){f.mapping[a].data[c]=b[c]})}function e(a,b){f.mapping[a].data[b]=void 0}var f={namespace:b.attr("ng-app")?b.attr("ng-app")+".":"",mapping:{},register:function(a,b,c){if(void 0!==f.mapping[b])throw new Error('keyName "'+b+'" already in use.');f.mapping[b]={instance:a,data:{}},c.map(function(a){var c=typeof a;switch(c){case"object":d(b,a);break;case"string":e(b,a)}})},saveState:function(b){var c,d,e=f.mapping[b].instance,g=f.mapping[b].data;Object.keys(g).forEach(function(b){c=e[b],b=f.namespace+b,"undefined"!=typeof c?(d=JSON.stringify(c),a.localStorage.setItem(b,d)):a.localStorage.removeItem(b)})},recoverState:function(b){var d,e,g,h=f.mapping[b].instance,i=f.mapping[b].data;Object.keys(i).forEach(function(i){g=f.namespace+i,e=a.localStorage.getItem(g),e?(d=JSON.parse(e),c(h[i],d,b,i)):c(h[i],f.mapping[b].data[i])})},resetState:function(b){var c,d=f.mapping[b].instance,e=f.mapping[b].data;Object.keys(e).forEach(function(e){c=f.namespace+e,a.localStorageremoveItem(c),d[e]=f.mapping[b].data[e]})}};return f}]);